<!DOCTYPE html>
<html lang="en">
<head>
	<title>Tide Arduino Kits for Education</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->




</head>

<body>
	<div class="container">
		<h1>Luminosidad</h1>


		<div id="sensor"></div>

		<div class="row">
		  <div class="col-xs-4"><button onclick="lamp('on')">On</button></div>
		  <div class="col-xs-4"><button onclick="lamp('off')">Off</button></div>
		</div>


		
		
	</div>



	<script src="/js/libs/jquery/jquery-2.0.3.min.js"></script>
 	<script src="/js/libs/underscore/underscore-min.js"></script>
    <script src="/js/libs/bootstrap/bootstrap.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
	<script src="/js/libs/backbone/backbone-min.js"></script>
	<script>
		var socket,lamp;
		$(document).ready(function() {
			socket = io.connect('http://192.168.2.99:8080');
			
			socket.on('news', function (data) {
				console.log(data);
			});

			socket.on('light', function (data) {
				$("#sensor").html(data.value);

				if (data.value <20) {
					socket.emit('lamp', { value: 'on' });
				} else {
					//socket.emit('lamp', { value: 'off' });
				}

		  	});

			lamp = function(mode) {
				socket.emit('lamp', { value: mode });
			}

		});
	</script>
</body>
</html>